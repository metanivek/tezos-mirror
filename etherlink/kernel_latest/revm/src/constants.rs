// SPDX-FileCopyrightText: 2025 Nomadic Labs <contact@nomadic-labs.com>
//
// SPDX-License-Identifier: MIT

use revm::primitives::{Address, FixedBytes};

// Snippet used to generate `WITHDRAWAL_SOL_CONTRACT` (use in test_withdrawal_contract):
// let created_account = world_state_handler
//     .get_or_create(&host, &account_path(&addr.unwrap()).unwrap())
//     .unwrap();
// let code = created_account.code(&host).unwrap();
// println!("STORED = {:?}", code.clone());

pub(crate) const WITHDRAWAL_SOL_CONTRACT: &str = "0x608060405260043610610028575f3560e01c806320d786b51461002c578063cda4fee214610056575b5f5ffd5b348015610037575f5ffd5b50610040610072565b60405161004d91906103ab565b60405180910390f35b610070600480360381019061006b9190610511565b610077565b005b5f5481565b5f73ff0000000000000000000000000000000000000390505f3490505f64e8d4a5100090505f81836100a991906105b2565b90505f82846100b891906105e2565b90505f84116100fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100f39061066c565b60405180910390fd5b5f811461013e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610135906106fa565b60405180910390fd5b5f8683604051602401610152929190610768565b6040516020818303038152906040527f7bced8e4000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8673ffffffffffffffffffffffffffffffffffffffff16826040516101f791906107da565b5f604051808303815f865af19150503d805f8114610230576040519150601f19603f3d011682016040523d82523d5f602084013e610235565b606091505b5050905080610279576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102709061083a565b60405180910390fd5b5f5f73ffffffffffffffffffffffffffffffffffffffff168760405161029e9061087b565b5f6040518083038185875af1925050503d805f81146102d8576040519150601f19603f3d011682016040523d82523d5f602084013e6102dd565b606091505b5050905080610321576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610318906108d9565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff167f0217d2f84deede7e64b4ddb96e2a4407ee7348091dc9c33657f0b7cbe44e625e885f5460405161036a9291906108f7565b60405180910390a25f5f8154809291906103839061091e565b9190505550505050505050505050565b5f819050919050565b6103a581610393565b82525050565b5f6020820190506103be5f83018461039c565b92915050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610423826103dd565b810181811067ffffffffffffffff82111715610442576104416103ed565b5b80604052505050565b5f6104546103c4565b9050610460828261041a565b919050565b5f67ffffffffffffffff82111561047f5761047e6103ed565b5b610488826103dd565b9050602081019050919050565b828183375f83830152505050565b5f6104b56104b084610465565b61044b565b9050828152602081018484840111156104d1576104d06103d9565b5b6104dc848285610495565b509392505050565b5f82601f8301126104f8576104f76103d5565b5b81356105088482602086016104a3565b91505092915050565b5f60208284031215610526576105256103cd565b5b5f82013567ffffffffffffffff811115610543576105426103d1565b5b61054f848285016104e4565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6105bc82610393565b91506105c783610393565b9250826105d7576105d6610558565b5b828204905092915050565b5f6105ec82610393565b91506105f783610393565b92508261060757610606610558565b5b828206905092915050565b5f82825260208201905092915050565b7f416d6f756e74206973207a65726f0000000000000000000000000000000000005f82015250565b5f610656600e83610612565b915061066182610622565b602082019050919050565b5f6020820190508181035f8301526106838161064a565b9050919050565b7f416d6f756e74206d757374206265206d756c7469706c65206f662031305e31325f8201527f20576569202831206d7574657a29000000000000000000000000000000000000602082015250565b5f6106e4602e83610612565b91506106ef8261068a565b604082019050919050565b5f6020820190508181035f830152610711816106d8565b9050919050565b5f81519050919050565b8281835e5f83830152505050565b5f61073a82610718565b6107448185610612565b9350610754818560208601610722565b61075d816103dd565b840191505092915050565b5f6040820190508181035f8301526107808185610730565b905061078f602083018461039c565b9392505050565b5f81519050919050565b5f81905092915050565b5f6107b482610796565b6107be81856107a0565b93506107ce818560208601610722565b80840191505092915050565b5f6107e582846107aa565b915081905092915050565b7f43616c6c20746f20746865206f7574626f782073656e646572206661696c65645f82015250565b5f610824602083610612565b915061082f826107f0565b602082019050919050565b5f6020820190508181035f83015261085181610818565b9050919050565b50565b5f6108665f836107a0565b915061087182610858565b5f82019050919050565b5f6108858261085b565b9150819050919050565b7f4661696c656420746f206275726e0000000000000000000000000000000000005f82015250565b5f6108c3600e83610612565b91506108ce8261088f565b602082019050919050565b5f6020820190508181035f8301526108f0816108b7565b9050919050565b5f60408201905061090a5f83018561039c565b610917602083018461039c565b9392505050565b5f61092882610393565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361095a57610959610585565b5b60018201905091905056fea2646970667358221220d67e6526cfde4e09de705bb433aca50860217e291c987db0f57c478f8afd5cd364736f6c634300081e0033000000000000000000000000";

pub(crate) const FA_WITHDRAWAL_SOL_CONTRACT: &str = "0x608060405260043610610033575f3560e01c806320d786b514610037578063379607f51461006157806380fc1fe31461007d575b5f5ffd5b348015610042575f5ffd5b5061004b610099565b6040516100589190610c12565b60405180910390f35b61007b60048036038101906100769190610c66565b61009e565b005b61009760048036038101906100929190610e7c565b610694565b005b5f5481565b5f5f90505f73ff0000000000000000000000000000000000000490505f836040516024016100cc9190610c12565b6040516020818303038152906040527f15b0773a000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f5f8373ffffffffffffffffffffffffffffffffffffffff16836040516101729190610f7d565b5f604051808303815f865af19150503d805f81146101ab576040519150601f19603f3d011682016040523d82523d5f602084013e6101b0565b606091505b5091509150816101f5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101ec90610fed565b60405180910390fd5b5f6101ff82610b7b565b90505f8160200151825f015183606001516040516024016102229392919061101a565b6040516020818303038152906040527f0efe6a8b000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8260400151826040516024016102b9929190611097565b6040516020818303038152906040527f6fadcf72000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8873ffffffffffffffffffffffffffffffffffffffff168260405161035e9190610f7d565b5f604051808303815f865af19150503d805f8114610397576040519150601f19603f3d011682016040523d82523d5f602084013e61039c565b606091505b505090505f816103b05784602001516103b6565b84604001515b90505f856060015182875f01516040516024016103d5939291906110c5565b6040516020818303038152906040527ff9d70f69000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8a73ffffffffffffffffffffffffffffffffffffffff168260405161047a9190610f7d565b5f604051808303815f865af19150503d805f81146104b3576040519150601f19603f3d011682016040523d82523d5f602084013e6104b8565b606091505b50509050806104fc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104f390611190565b60405180910390fd5b7f4762811996956c79972a9baa94887b90ec6b460c5326f4274c04bc5e2f7319d5838860200151895f01518a608001518b60a001516040516105429594939291906111ae565b60405180910390a15f8d60405160240161055c9190610c12565b6040516020818303038152906040527f14db7b18000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8c73ffffffffffffffffffffffffffffffffffffffff16826040516106019190610f7d565b5f604051808303815f865af19150503d805f811461063a576040519150601f19603f3d011682016040523d82523d5f602084013e61063f565b606091505b5050905080610683576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161067a90611249565b60405180910390fd5b505050505050505050505050505050565b5f73ff0000000000000000000000000000000000000390505f73ff0000000000000000000000000000000000000490505f8511610706576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106fd906112d7565b60405180910390fd5b5f848460405160200161071a929190611315565b604051602081830303815290604052805190602001205f1c90505f81898860405160240161074a939291906110c5565b6040516020818303038152906040527fd93ad063000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8373ffffffffffffffffffffffffffffffffffffffff16826040516107ef9190610f7d565b5f604051808303815f865af19150503d805f8114610828576040519150601f19603f3d011682016040523d82523d5f602084013e61082d565b606091505b5050905080610871576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161086890611190565b60405180910390fd5b5f3389856040516024016108879392919061101a565b6040516020818303038152906040527fb5c5f672000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8b73ffffffffffffffffffffffffffffffffffffffff168260405161092c9190610f7d565b5f604051808303815f865af19150503d805f8114610965576040519150601f19603f3d011682016040523d82523d5f602084013e61096a565b606091505b50509050806109ae576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109a590611386565b60405180910390fd5b5f8b8b8b8b6040516024016109c694939291906113b3565b6040516020818303038152906040527fe9f58a77000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff838183161783525050505090505f8873ffffffffffffffffffffffffffffffffffffffff1682604051610a6b9190610f7d565b5f604051808303815f865af19150503d805f8114610aa4576040519150601f19603f3d011682016040523d82523d5f602084013e610aa9565b606091505b5050905080610aed576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ae49061149a565b60405180910390fd5b8d73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fa58e97edea058c8c4d08b11659ee5656328622e45b2b9864cbd10054dc1769a08e5f54604051610b4d9291906114b8565b60405180910390a35f5f815480929190610b669061150c565b91905055505050505050505050505050505050565b610b83610b9e565b81806020019051810190610b97919061161c565b9050919050565b6040518060c001604052805f81526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f81526020015f81526020015f81525090565b5f819050919050565b610c0c81610bfa565b82525050565b5f602082019050610c255f830184610c03565b92915050565b5f604051905090565b5f5ffd5b5f5ffd5b610c4581610bfa565b8114610c4f575f5ffd5b50565b5f81359050610c6081610c3c565b92915050565b5f60208284031215610c7b57610c7a610c34565b5b5f610c8884828501610c52565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610cba82610c91565b9050919050565b610cca81610cb0565b8114610cd4575f5ffd5b50565b5f81359050610ce581610cc1565b92915050565b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610d3982610cf3565b810181811067ffffffffffffffff82111715610d5857610d57610d03565b5b80604052505050565b5f610d6a610c2b565b9050610d768282610d30565b919050565b5f67ffffffffffffffff821115610d9557610d94610d03565b5b610d9e82610cf3565b9050602081019050919050565b828183375f83830152505050565b5f610dcb610dc684610d7b565b610d61565b905082815260208101848484011115610de757610de6610cef565b5b610df2848285610dab565b509392505050565b5f82601f830112610e0e57610e0d610ceb565b5b8135610e1e848260208601610db9565b91505092915050565b5f7fffffffffffffffffffffffffffffffffffffffffffff0000000000000000000082169050919050565b610e5b81610e27565b8114610e65575f5ffd5b50565b5f81359050610e7681610e52565b92915050565b5f5f5f5f5f60a08688031215610e9557610e94610c34565b5b5f610ea288828901610cd7565b955050602086013567ffffffffffffffff811115610ec357610ec2610c38565b5b610ecf88828901610dfa565b9450506040610ee088828901610c52565b9350506060610ef188828901610e68565b925050608086013567ffffffffffffffff811115610f1257610f11610c38565b5b610f1e88828901610dfa565b9150509295509295909350565b5f81519050919050565b5f81905092915050565b8281835e5f83830152505050565b5f610f5782610f2b565b610f618185610f35565b9350610f71818560208601610f3f565b80840191505092915050565b5f610f888284610f4d565b915081905092915050565b5f82825260208201905092915050565b7f436f756c64206e6f742066696e64206465706f736974000000000000000000005f82015250565b5f610fd7601683610f93565b9150610fe282610fa3565b602082019050919050565b5f6020820190508181035f83015261100481610fcb565b9050919050565b61101481610cb0565b82525050565b5f60608201905061102d5f83018661100b565b61103a6020830185610c03565b6110476040830184610c03565b949350505050565b5f82825260208201905092915050565b5f61106982610f2b565b611073818561104f565b9350611083818560208601610f3f565b61108c81610cf3565b840191505092915050565b5f6040820190506110aa5f83018561100b565b81810360208301526110bc818461105f565b90509392505050565b5f6060820190506110d85f830186610c03565b6110e5602083018561100b565b6110f26040830184610c03565b949350505050565b7f4661696c656420746f2064656372656d656e74207469636b65742062616c616e5f8201527f63653a207469636b65745f62616c616e63655f72656d6f76652063616c6c207760208201527f617320756e7375636365737366756c0000000000000000000000000000000000604082015250565b5f61117a604f83610f93565b9150611185826110fa565b606082019050919050565b5f6020820190508181035f8301526111a78161116e565b9050919050565b5f60a0820190506111c15f83018861100b565b6111ce602083018761100b565b6111db6040830186610c03565b6111e86060830185610c03565b6111f56080830184610c03565b9695505050505050565b7f436f756c64206e6f742072656d6f7665206465706f73697400000000000000005f82015250565b5f611233601883610f93565b915061123e826111ff565b602082019050919050565b5f6020820190508181035f83015261126081611227565b9050919050565b7f456d707479207769746864726177616c7320617265206e6f7420616c6c6f77655f8201527f6400000000000000000000000000000000000000000000000000000000000000602082015250565b5f6112c1602183610f93565b91506112cc82611267565b604082019050919050565b5f6020820190508181035f8301526112ee816112b5565b9050919050565b5f819050919050565b61130f61130a82610e27565b6112f5565b82525050565b5f61132082856112fe565b6016820191506113308284610f4d565b91508190509392505050565b7f50726f78792063616c6c206661696c65640000000000000000000000000000005f82015250565b5f611370601183610f93565b915061137b8261133c565b602082019050919050565b5f6020820190508181035f83015261139d81611364565b9050919050565b6113ad81610e27565b82525050565b5f6080820190508181035f8301526113cb818761105f565b90506113da6020830186610c03565b6113e760408301856113a4565b81810360608301526113f9818461105f565b905095945050505050565b7f4661696c656420746f2070726f64756365206d6573736167653a20707573685f5f8201527f66615f7769746864726177616c5f746f5f6f7574626f782063616c6c20756e7360208201527f75636365737366756c0000000000000000000000000000000000000000000000604082015250565b5f611484604983610f93565b915061148f82611404565b606082019050919050565b5f6020820190508181035f8301526114b181611478565b9050919050565b5f6040820190506114cb5f830185610c03565b6114d86020830184610c03565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61151682610bfa565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611548576115476114df565b5b600182019050919050565b5f5ffd5b5f8151905061156581610c3c565b92915050565b5f8151905061157981610cc1565b92915050565b5f60c0828403121561159457611593611553565b5b61159e60c0610d61565b90505f6115ad84828501611557565b5f8301525060206115c08482850161156b565b60208301525060406115d48482850161156b565b60408301525060606115e884828501611557565b60608301525060806115fc84828501611557565b60808301525060a061161084828501611557565b60a08301525092915050565b5f60c0828403121561163157611630610c34565b5b5f61163e8482850161157f565b9150509291505056fea2646970667358221220e049b53e63abe8945ba37d22c6e5fd1379fc7dd58f5c7dfeabeb7e866adcf8c364736f6c634300081d003300";

pub(crate) const INTERNAL_FORWARDER_SOL_CONTRACT: &str = "0x608060405260043610610021575f3560e01c80636fadcf721461002457610022565b5b005b34801561002f575f5ffd5b5061004a6004803603810190610045919061021f565b610061565b604051610058929190610306565b60405180910390f35b5f606073ff0000000000000000000000000000000000000273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146100e6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100dd906103b4565b60405180910390fd5b8473ffffffffffffffffffffffffffffffffffffffff16848460405161010d92919061040e565b5f604051808303815f865af19150503d805f8114610146576040519150601f19603f3d011682016040523d82523d5f602084013e61014b565b606091505b508092508193505050935093915050565b5f5ffd5b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61018d82610164565b9050919050565b61019d81610183565b81146101a7575f5ffd5b50565b5f813590506101b881610194565b92915050565b5f5ffd5b5f5ffd5b5f5ffd5b5f5f83601f8401126101df576101de6101be565b5b8235905067ffffffffffffffff8111156101fc576101fb6101c2565b5b602083019150836001820283011115610218576102176101c6565b5b9250929050565b5f5f5f604084860312156102365761023561015c565b5b5f610243868287016101aa565b935050602084013567ffffffffffffffff81111561026457610263610160565b5b610270868287016101ca565b92509250509250925092565b5f8115159050919050565b6102908161027c565b82525050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f6102d882610296565b6102e281856102a0565b93506102f28185602086016102b0565b6102fb816102be565b840191505092915050565b5f6040820190506103195f830185610287565b818103602083015261032b81846102ce565b90509392505050565b5f82825260208201905092915050565b7f496e7465726e616c466f727761726465723a20756e617574686f72697a6564205f8201527f63616c6c65720000000000000000000000000000000000000000000000000000602082015250565b5f61039e602683610334565b91506103a982610344565b604082019050919050565b5f6020820190508181035f8301526103cb81610392565b9050919050565b5f81905092915050565b828183375f83830152505050565b5f6103f583856103d2565b93506104028385846103dc565b82840190509392505050565b5f61041a8284866103ea565b9150819050939250505056fea2646970667358221220f8f1230872fc0e8cc0d5a776a03f70b9e5d62ff7b279ce5b93a70595ef603d1364736f6c634300081d003300";

pub(crate) const WITHDRAWAL_SOL_ADDR: Address = Address(FixedBytes::new([
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
]));

pub(crate) const FA_WITHDRAWAL_SOL_ADDR: Address = Address(FixedBytes::new([
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
]));

pub(crate) const SEND_OUTBOX_MESSAGE_PRECOMPILE_ADDRESS: Address =
    Address(FixedBytes::new([
        0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03,
    ]));

pub(crate) const TABLE_PRECOMPILE_ADDRESS: Address = Address(FixedBytes::new([
    0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x04,
]));

pub(crate) const CUSTOMS: [Address; 4] = [
    WITHDRAWAL_SOL_ADDR,
    FA_WITHDRAWAL_SOL_ADDR,
    SEND_OUTBOX_MESSAGE_PRECOMPILE_ADDRESS,
    TABLE_PRECOMPILE_ADDRESS,
];
